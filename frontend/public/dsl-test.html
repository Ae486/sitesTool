<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DSL åŠŸèƒ½æµ‹è¯•é¡µé¢</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: system-ui, sans-serif; padding: 20px; background: #f5f5f5; }
    .container { max-width: 1200px; margin: 0 auto; }
    h1 { color: #333; margin-bottom: 20px; }
    .section { background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    .section h2 { color: #666; margin-bottom: 15px; font-size: 16px; border-bottom: 1px solid #eee; padding-bottom: 10px; }
    button { padding: 10px 20px; margin: 5px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: all 0.2s; }
    .btn-primary { background: #1890ff; color: white; }
    .btn-primary:hover { background: #40a9ff; }
    .btn-success { background: #52c41a; color: white; }
    .btn-success:hover { background: #73d13d; }
    .btn-danger { background: #ff4d4f; color: white; }
    .btn-danger:hover { background: #ff7875; }
    input[type="text"], input[type="number"], select { padding: 8px 12px; border: 1px solid #d9d9d9; border-radius: 4px; font-size: 14px; margin: 5px; }
    .result { padding: 15px; background: #f0f0f0; border-radius: 4px; margin-top: 10px; font-family: monospace; white-space: pre-wrap; }
    .success { background: #f6ffed; border: 1px solid #b7eb8f; }
    .error { background: #fff2f0; border: 1px solid #ffccc7; }
    .code-list { list-style: none; }
    .code-list li { padding: 10px; background: #e6f7ff; margin: 5px 0; border-radius: 4px; display: flex; justify-content: space-between; align-items: center; }
    .code-list li.used { background: #f0f0f0; color: #999; text-decoration: line-through; }
    .lottery-result { font-size: 24px; font-weight: bold; padding: 20px; text-align: center; border-radius: 8px; margin: 20px 0; }
    .lottery-win { background: linear-gradient(135deg, #ffd700, #ffec8b); color: #333; }
    .lottery-lose { background: #f5f5f5; color: #999; }
    .counter { font-size: 48px; font-weight: bold; color: #1890ff; }
    .hover-menu { position: relative; display: inline-block; }
    .hover-menu .dropdown { display: none; position: absolute; background: white; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border-radius: 4px; min-width: 150px; z-index: 10; }
    .hover-menu:hover .dropdown { display: block; }
    .hover-menu .dropdown a { display: block; padding: 10px 15px; color: #333; text-decoration: none; }
    .hover-menu .dropdown a:hover { background: #f5f5f5; }
    #hidden-element { display: none; }
    .checkbox-group label { display: block; margin: 5px 0; cursor: pointer; }
    .tab-content { display: none; padding: 15px; border: 1px solid #d9d9d9; border-top: none; border-radius: 0 0 4px 4px; }
    .tab-content.active { display: block; }
    .tabs button { border-radius: 4px 4px 0 0; margin: 0; }
    .tabs button.active { background: #1890ff; color: white; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ§ª DSL åŠŸèƒ½æµ‹è¯•é¡µé¢</h1>
    
    <!-- åŸºç¡€æ“ä½œæµ‹è¯• -->
    <div class="section">
      <h2>1. åŸºç¡€æ“ä½œæµ‹è¯•</h2>
      <button id="btn-click" class="btn-primary" onclick="handleClick()">ç‚¹å‡»æˆ‘</button>
      <button id="btn-double" class="btn-success" ondblclick="handleDoubleClick()">åŒå‡»æˆ‘</button>
      <span id="click-count">ç‚¹å‡»æ¬¡æ•°: 0</span>
      <div class="result" id="click-result">ç­‰å¾…ç‚¹å‡»...</div>
    </div>

    <!-- è¾“å…¥æµ‹è¯• -->
    <div class="section">
      <h2>2. è¾“å…¥æµ‹è¯•</h2>
      <input type="text" id="input-text" placeholder="è¾“å…¥æ–‡æœ¬æµ‹è¯•">
      <input type="number" id="input-number" placeholder="è¾“å…¥æ•°å­—">
      <select id="select-city">
        <option value="">é€‰æ‹©åŸå¸‚</option>
        <option value="beijing">åŒ—äº¬</option>
        <option value="shanghai">ä¸Šæµ·</option>
        <option value="guangzhou">å¹¿å·</option>
      </select>
      <button class="btn-primary" onclick="showInputValues()">æ˜¾ç¤ºè¾“å…¥å€¼</button>
      <div class="result" id="input-result">è¾“å…¥å€¼å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</div>
    </div>

    <!-- æ‚¬åœèœå•æµ‹è¯• -->
    <div class="section">
      <h2>3. æ‚¬åœèœå•æµ‹è¯•</h2>
      <div class="hover-menu" id="hover-menu">
        <button class="btn-primary">æ‚¬åœæ˜¾ç¤ºèœå•</button>
        <div class="dropdown" id="dropdown-menu">
          <a href="#" onclick="selectMenuItem('é€‰é¡¹1'); return false;">é€‰é¡¹1</a>
          <a href="#" onclick="selectMenuItem('é€‰é¡¹2'); return false;">é€‰é¡¹2</a>
          <a href="#" onclick="selectMenuItem('é€‰é¡¹3'); return false;">é€‰é¡¹3</a>
        </div>
      </div>
      <div class="result" id="hover-result">æ‚¬åœèœå•æµ‹è¯•</div>
    </div>

    <!-- æ¡ä»¶åˆ¤æ–­æµ‹è¯• -->
    <div class="section">
      <h2>4. æ¡ä»¶åˆ¤æ–­æµ‹è¯•ï¼ˆif_existsï¼‰</h2>
      <button class="btn-success" onclick="showHiddenElement()">æ˜¾ç¤ºéšè—å…ƒç´ </button>
      <button class="btn-danger" onclick="hideElement()">éšè—å…ƒç´ </button>
      <div id="hidden-element" style="padding: 10px; background: #e6f7ff; margin-top: 10px;">
        âœ… æˆ‘æ˜¯å¯èƒ½å­˜åœ¨ä¹Ÿå¯èƒ½ä¸å­˜åœ¨çš„å…ƒç´ ï¼
      </div>
      <div id="conditional-element" style="padding: 10px; background: #f6ffed; margin-top: 10px;">
        ğŸ¯ å§‹ç»ˆå­˜åœ¨çš„å…ƒç´ 
      </div>
    </div>

    <!-- æŠ½å¥–æ¨¡æ‹Ÿæµ‹è¯• -->
    <div class="section">
      <h2>5. æŠ½å¥–æ¨¡æ‹Ÿï¼ˆç”¨äºæµ‹è¯•æ¡ä»¶åˆ†æ”¯ï¼‰</h2>
      <p>å‰©ä½™æŠ½å¥–æ¬¡æ•°: <span id="lottery-chances">3</span></p>
      <button id="btn-lottery" class="btn-primary" onclick="doLottery()">ğŸ° æŠ½å¥–</button>
      <div class="lottery-result" id="lottery-result">ç‚¹å‡»æŠ½å¥–æŒ‰é’®å¼€å§‹</div>
      <div id="lottery-code" style="display: none;">
        <p>æ­å–œè·å¾—å…‘æ¢ç :</p>
        <strong id="won-code"></strong>
      </div>
    </div>

    <!-- å…‘æ¢ç åˆ—è¡¨ï¼ˆæ‰¹é‡æå–æµ‹è¯•ï¼‰ -->
    <div class="section">
      <h2>6. å…‘æ¢ç åˆ—è¡¨ï¼ˆextract_all æµ‹è¯•ï¼‰</h2>
      <ul class="code-list" id="code-list">
        <li data-code="ABC123"><span class="code-text">ABC123</span> <button onclick="useCode(this)">ä½¿ç”¨</button></li>
        <li data-code="DEF456"><span class="code-text">DEF456</span> <button onclick="useCode(this)">ä½¿ç”¨</button></li>
        <li data-code="GHI789"><span class="code-text">GHI789</span> <button onclick="useCode(this)">ä½¿ç”¨</button></li>
        <li data-code="JKL012"><span class="code-text">JKL012</span> <button onclick="useCode(this)">ä½¿ç”¨</button></li>
        <li data-code="MNO345"><span class="code-text">MNO345</span> <button onclick="useCode(this)">ä½¿ç”¨</button></li>
      </ul>
      <button class="btn-success" onclick="addNewCode()">ç”Ÿæˆæ–°å…‘æ¢ç </button>
    </div>

    <!-- å…‘æ¢ç ä½¿ç”¨ -->
    <div class="section">
      <h2>7. å…‘æ¢ç ä½¿ç”¨ï¼ˆè¾“å…¥å˜é‡æµ‹è¯•ï¼‰</h2>
      <input type="text" id="redeem-input" placeholder="è¾“å…¥å…‘æ¢ç ">
      <button id="btn-redeem" class="btn-success" onclick="redeemCode()">å…‘æ¢</button>
      <div class="result" id="redeem-result">è¾“å…¥å…‘æ¢ç å¹¶ç‚¹å‡»å…‘æ¢</div>
    </div>

    <!-- å¤é€‰æ¡†æµ‹è¯• -->
    <div class="section">
      <h2>8. å¤é€‰æ¡†æµ‹è¯•</h2>
      <div class="checkbox-group">
        <label><input type="checkbox" id="cb-agree" value="agree"> æˆ‘åŒæ„æœåŠ¡æ¡æ¬¾</label>
        <label><input type="checkbox" id="cb-news" value="news"> è®¢é˜…æ–°é—»</label>
        <label><input type="checkbox" id="cb-promo" value="promo"> æ¥æ”¶ä¿ƒé”€ä¿¡æ¯</label>
      </div>
      <button class="btn-primary" onclick="checkSelected()">æ£€æŸ¥é€‰ä¸­é¡¹</button>
      <div class="result" id="checkbox-result">é€‰ä¸­é¡¹å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</div>
    </div>

    <!-- è®¡æ•°å™¨æµ‹è¯•ï¼ˆå¾ªç¯æµ‹è¯•ï¼‰ -->
    <div class="section">
      <h2>9. è®¡æ•°å™¨æµ‹è¯•ï¼ˆloop æµ‹è¯•ï¼‰</h2>
      <div class="counter" id="counter">0</div>
      <button id="btn-increment" class="btn-primary" onclick="increment()">+1</button>
      <button id="btn-decrement" class="btn-danger" onclick="decrement()">-1</button>
      <button class="btn-success" onclick="resetCounter()">é‡ç½®</button>
    </div>

    <!-- é”®ç›˜äº‹ä»¶æµ‹è¯• -->
    <div class="section">
      <h2>10. é”®ç›˜äº‹ä»¶æµ‹è¯•</h2>
      <input type="text" id="keyboard-input" placeholder="åœ¨æ­¤è¾“å…¥ï¼ŒæŒ‰ Enter æäº¤" onkeydown="handleKeyboard(event)">
      <div class="result" id="keyboard-result">é”®ç›˜äº‹ä»¶: ç­‰å¾…è¾“å…¥...</div>
    </div>

    <!-- æ–­è¨€æµ‹è¯• -->
    <div class="section">
      <h2>11. æ–­è¨€æµ‹è¯•</h2>
      <p id="assert-text">è¿™æ˜¯ç”¨äºæ–­è¨€æµ‹è¯•çš„æ–‡æœ¬å†…å®¹ï¼šSUCCESS_MESSAGE</p>
      <p id="assert-number">å½“å‰æ•°å€¼: <span id="assert-value">42</span></p>
      <button class="btn-primary" onclick="changeAssertValue()">æ”¹å˜æ•°å€¼</button>
    </div>

    <!-- æ»šåŠ¨æµ‹è¯• -->
    <div class="section" style="height: 300px; overflow: auto;" id="scroll-container">
      <h2>12. æ»šåŠ¨æµ‹è¯•</h2>
      <div style="height: 800px; padding: 20px;">
        <p id="scroll-top">é¡¶éƒ¨å†…å®¹</p>
        <div style="margin-top: 600px;">
          <p id="scroll-bottom">åº•éƒ¨å†…å®¹ - éœ€è¦æ»šåŠ¨æ‰èƒ½çœ‹åˆ°</p>
          <button id="btn-scroll-target" class="btn-success">æ»šåŠ¨ç›®æ ‡æŒ‰é’®</button>
        </div>
      </div>
    </div>

    <!-- æ ‡ç­¾é¡µåˆ‡æ¢æµ‹è¯• -->
    <div class="section">
      <h2>13. æ ‡ç­¾é¡µæµ‹è¯•ï¼ˆnew_tab / switch_tabï¼‰</h2>
      <div class="tabs">
        <button class="active" onclick="switchLocalTab(0)">æ ‡ç­¾1</button>
        <button onclick="switchLocalTab(1)">æ ‡ç­¾2</button>
        <button onclick="switchLocalTab(2)">æ ‡ç­¾3</button>
      </div>
      <div class="tab-content active" id="tab-1">
        <h3>æ ‡ç­¾é¡µ 1 å†…å®¹</h3>
        <p>è¿™æ˜¯ç¬¬ä¸€ä¸ªæ ‡ç­¾é¡µçš„å†…å®¹</p>
        <p id="tab1-data">æ•°æ®: TAB1_VALUE_001</p>
      </div>
      <div class="tab-content" id="tab-2">
        <h3>æ ‡ç­¾é¡µ 2 å†…å®¹</h3>
        <p>è¿™æ˜¯ç¬¬äºŒä¸ªæ ‡ç­¾é¡µçš„å†…å®¹</p>
        <p id="tab2-data">æ•°æ®: TAB2_VALUE_002</p>
      </div>
      <div class="tab-content" id="tab-3">
        <h3>æ ‡ç­¾é¡µ 3 å†…å®¹</h3>
        <p>è¿™æ˜¯ç¬¬ä¸‰ä¸ªæ ‡ç­¾é¡µçš„å†…å®¹</p>
        <p id="tab3-data">æ•°æ®: TAB3_VALUE_003</p>
      </div>
    </div>

    <!-- æ‰§è¡Œ JS æµ‹è¯• -->
    <div class="section">
      <h2>14. æ‰§è¡Œ JS æµ‹è¯•ï¼ˆeval_jsï¼‰</h2>
      <button class="btn-primary" onclick="runCustomJS()">æ‰§è¡Œè‡ªå®šä¹‰JS</button>
      <div class="result" id="js-result">JS æ‰§è¡Œç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</div>
    </div>
  </div>

  <script>
    // åŸºç¡€ç‚¹å‡»
    let clickCount = 0;
    function handleClick() {
      clickCount++;
      document.getElementById('click-count').textContent = 'ç‚¹å‡»æ¬¡æ•°: ' + clickCount;
      document.getElementById('click-result').textContent = 'æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼æ—¶é—´: ' + new Date().toLocaleTimeString();
      document.getElementById('click-result').className = 'result success';
    }
    function handleDoubleClick() {
      document.getElementById('click-result').textContent = 'æŒ‰é’®è¢«åŒå‡»äº†ï¼';
      document.getElementById('click-result').className = 'result success';
    }

    // è¾“å…¥æµ‹è¯•
    function showInputValues() {
      const text = document.getElementById('input-text').value;
      const number = document.getElementById('input-number').value;
      const city = document.getElementById('select-city').value;
      document.getElementById('input-result').textContent = 
        `æ–‡æœ¬: ${text || '(ç©º)'}\næ•°å­—: ${number || '(ç©º)'}\nåŸå¸‚: ${city || '(æœªé€‰æ‹©)'}`;
    }

    // æ‚¬åœèœå•
    function selectMenuItem(item) {
      document.getElementById('hover-result').textContent = 'é€‰ä¸­äº†: ' + item;
      document.getElementById('hover-result').className = 'result success';
    }

    // æ¡ä»¶åˆ¤æ–­
    function showHiddenElement() {
      document.getElementById('hidden-element').style.display = 'block';
    }
    function hideElement() {
      document.getElementById('hidden-element').style.display = 'none';
    }

    // æŠ½å¥–æ¨¡æ‹Ÿ
    let lotteryChances = 3;
    const codes = ['PRIZE-A1B2C3', 'PRIZE-D4E5F6', 'PRIZE-G7H8I9', 'PRIZE-J0K1L2'];
    function doLottery() {
      if (lotteryChances <= 0) {
        document.getElementById('lottery-result').textContent = 'æŠ½å¥–æ¬¡æ•°å·²ç”¨å®Œï¼';
        document.getElementById('lottery-result').className = 'lottery-result lottery-lose';
        return;
      }
      
      lotteryChances--;
      document.getElementById('lottery-chances').textContent = lotteryChances;
      
      // 50% ä¸­å¥–æ¦‚ç‡
      const win = Math.random() > 0.5;
      
      if (win) {
        const code = codes[Math.floor(Math.random() * codes.length)];
        document.getElementById('lottery-result').textContent = 'ğŸ‰ æ­å–œä¸­å¥–ï¼';
        document.getElementById('lottery-result').className = 'lottery-result lottery-win';
        document.getElementById('lottery-code').style.display = 'block';
        document.getElementById('won-code').textContent = code;
      } else {
        document.getElementById('lottery-result').textContent = 'ğŸ˜¢ å¾ˆé—æ†¾ï¼Œæœªä¸­å¥–';
        document.getElementById('lottery-result').className = 'lottery-result lottery-lose';
        document.getElementById('lottery-code').style.display = 'none';
      }
    }

    // å…‘æ¢ç åˆ—è¡¨
    function useCode(btn) {
      const li = btn.parentElement;
      li.classList.add('used');
      btn.disabled = true;
      btn.textContent = 'å·²ä½¿ç”¨';
    }
    function addNewCode() {
      const code = 'NEW' + Math.random().toString(36).substr(2, 6).toUpperCase();
      const li = document.createElement('li');
      li.setAttribute('data-code', code);
      li.innerHTML = `<span class="code-text">${code}</span> <button onclick="useCode(this)">ä½¿ç”¨</button>`;
      document.getElementById('code-list').appendChild(li);
    }

    // å…‘æ¢ç ä½¿ç”¨
    function redeemCode() {
      const code = document.getElementById('redeem-input').value.trim();
      if (!code) {
        document.getElementById('redeem-result').textContent = 'è¯·è¾“å…¥å…‘æ¢ç ';
        document.getElementById('redeem-result').className = 'result error';
        return;
      }
      
      // æ¨¡æ‹ŸéªŒè¯
      if (code.startsWith('PRIZE-') || code.length === 6) {
        document.getElementById('redeem-result').textContent = 'âœ… å…‘æ¢æˆåŠŸï¼å…‘æ¢ç : ' + code;
        document.getElementById('redeem-result').className = 'result success';
      } else {
        document.getElementById('redeem-result').textContent = 'âŒ æ— æ•ˆçš„å…‘æ¢ç : ' + code;
        document.getElementById('redeem-result').className = 'result error';
      }
    }

    // å¤é€‰æ¡†
    function checkSelected() {
      const checkboxes = document.querySelectorAll('.checkbox-group input:checked');
      const values = Array.from(checkboxes).map(cb => cb.value);
      document.getElementById('checkbox-result').textContent = 
        values.length > 0 ? 'é€‰ä¸­: ' + values.join(', ') : 'æœªé€‰ä¸­ä»»ä½•é¡¹';
    }

    // è®¡æ•°å™¨
    let counter = 0;
    function increment() {
      counter++;
      document.getElementById('counter').textContent = counter;
    }
    function decrement() {
      counter--;
      document.getElementById('counter').textContent = counter;
    }
    function resetCounter() {
      counter = 0;
      document.getElementById('counter').textContent = counter;
    }

    // é”®ç›˜äº‹ä»¶
    function handleKeyboard(event) {
      document.getElementById('keyboard-result').textContent = 
        `æŒ‰é”®: ${event.key} | ä»£ç : ${event.code} | Ctrl: ${event.ctrlKey} | Shift: ${event.shiftKey}`;
      
      if (event.key === 'Enter') {
        const value = event.target.value;
        document.getElementById('keyboard-result').textContent += '\nâœ… å·²æäº¤: ' + value;
        document.getElementById('keyboard-result').className = 'result success';
      }
    }

    // æ–­è¨€æµ‹è¯•
    function changeAssertValue() {
      const current = parseInt(document.getElementById('assert-value').textContent);
      document.getElementById('assert-value').textContent = current + 1;
    }

    // æ ‡ç­¾é¡µåˆ‡æ¢
    function switchLocalTab(index) {
      document.querySelectorAll('.tabs button').forEach((btn, i) => {
        btn.classList.toggle('active', i === index);
      });
      document.querySelectorAll('.tab-content').forEach((content, i) => {
        content.classList.toggle('active', i === index);
      });
    }

    // æ‰§è¡Œ JS
    function runCustomJS() {
      const result = {
        title: document.title,
        url: window.location.href,
        timestamp: new Date().toISOString(),
        counterValue: counter,
        clickCount: clickCount
      };
      document.getElementById('js-result').textContent = JSON.stringify(result, null, 2);
    }

    // é¡µé¢åŠ è½½å®Œæˆæç¤º
    console.log('DSL æµ‹è¯•é¡µé¢å·²åŠ è½½');
    console.log('å¯ç”¨äºæµ‹è¯•çš„é€‰æ‹©å™¨ç¤ºä¾‹:');
    console.log('  #btn-click - ç‚¹å‡»æŒ‰é’®');
    console.log('  #input-text - æ–‡æœ¬è¾“å…¥æ¡†');
    console.log('  #select-city - ä¸‹æ‹‰é€‰æ‹©');
    console.log('  .code-text - å…‘æ¢ç æ–‡æœ¬åˆ—è¡¨');
    console.log('  #hidden-element - å¯æ˜¾ç¤º/éšè—çš„å…ƒç´ ');
  </script>
</body>
</html>
